<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio to Mind Map - LectureMind AI</title>
    <meta name="description" content="Convert audio lectures to mind maps automatically">
    <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96">
    <link rel="stylesheet" href="/styles/new.css">
    <style>
        .audio-upload-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .upload-area {
            border: 2px dashed #007bff;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .upload-area:hover {
            background-color: #f8f9fa;
            border-color: #0056b3;
        }
        
        .upload-area.dragover {
            background-color: #e3f2fd;
            border-color: #2196f3;
        }
        
        .preview-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
        
        .mindmap-container {
            width: 100%;
            height: 600px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin: 20px 0;
            overflow: auto;
            background-color: white;
        }
        
        .approval-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .btn-approve {
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .btn-reject {
            background-color: #dc3545;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .transcription-text {
            background-color: white;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            font-style: italic;
            color: #666;
        }
        
        .node {
            cursor: pointer;
        }
        
        .node circle {
            fill: #fff;
            stroke: steelblue;
            stroke-width: 3px;
        }
        
        .node text {
            font: 12px sans-serif;
        }
        
        .link {
            fill: none;
            stroke: #ccc;
            stroke-width: 2px;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="text-logo">
            <a href="/" class="logo-link">
                <img src="/favicon/favicon-96x96.png" alt="Logo" class="logo">
                <h3 class="logo-text">Lecture Mind Map</h3>
            </a>
        </div>
        <div class="nav-links">
            <a href="/new.html">Create with AI</a>
            <a href="/history.html">History</a>
            <a href="/speech-to-text.html">Speech to Text</a>
            <a href="/audio-to-mindmap.html" class="active">Audio to Mind Map</a>
        </div>
    </div>

    <div class="container">
        <div class="audio-upload-container">
            <h1>Audio to Mind Map Converter</h1>
            <p class="topic-input-cta">Upload your audio lecture and get an instant English transcription</p>
            
            <!-- Audio Upload Section -->
            <div class="upload-area" id="uploadArea">
                <input type="file" id="audioFile" accept="audio/*" style="display: none;">
                <div>
                    <h3>Drop your audio file here or click to browse</h3>
                    <p>Supported formats: MP3, WAV, M4A, FLAC</p>
                </div>
            </div>
            
            <!-- File Info -->
            <div id="fileInfo" style="display: none;">
                <h4>Selected File: <span id="fileName"></span></h4>
                <button id="processAudio" class="control-button start-button">Convert to Text</button>
            </div>
            
            <!-- Transcription Preview -->
            <div id="transcriptionSection" style="display: none;">
                <h3>Transcribed Text</h3>
                <div class="preview-section">
                    <div class="transcription-text" id="transcriptionText"></div>
                    <div class="approval-buttons">
                        <button class="btn-approve" id="copyText">Copy Text</button>
                        <button class="btn-reject" id="uploadNew">Upload New Audio</button>
                    </div>
                </div>
            </div>
            
            <!-- Loading States -->
            <div id="loadingTranscription" class="loading" style="display: none;">
                <p>ðŸ”„ Transcribing audio... Please wait...</p>
            </div>
            
            <!-- Removed mind map loading and display sections -->
        </div>
    </div>

    <!-- Include D3.js for mind map visualization -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="/audio-to-mindmap.js"></script>
</body>
</html>

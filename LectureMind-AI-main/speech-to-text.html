<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speech to Text - LectureMind AI</title>
    <meta name="description" content="Convert speech to text with our AI-powered speech recognition tool.">
    <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96">
    <link rel="stylesheet" href="styles/new.css?v=2">
    <link rel="stylesheet" href="styles/speech-to-text.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <div class="navbar">
        <div class="text-logo">
            <a href="/" class="logo-link">
                <img src="/favicon/favicon-96x96.png" alt="Logo" class="logo">
                <h3 class="logo-text">Lecture Mind Map</h3>
            </a>
        </div>
        <div class="nav-links">
        </div>
        <button id="darkModeToggle" class="navbutton">üåô</button>
    </div>

    <div class="container">
        <div class="centered-div">
            <div class="header">
                <div class="microphone-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"></path>
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                        <line x1="12" y1="19" x2="12" y2="22"></line>
                    </svg>
                </div>
                <h1>Speech to Text Converter</h1>
                <p class="topic-input-cta">Convert your speech to text in real-time with AI-powered recognition</p>

                <div class="language-selection">
                    <div class="input-wrapper">
                        <label for="select_language">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="2" y1="12" x2="22" y2="12"></line>
                                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                            </svg>
                            Language
                        </label>
                        <select id="select_language"></select>
                    </div>

                    <div class="input-wrapper">
                        <label for="select_dialect">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                            Dialect
                        </label>
                        <select id="select_dialect"></select>
                    </div>
                </div>

                <div class="controls">
                    <button id="start" class="control-button start-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 6px;">
                            <polygon points="5 3 19 12 5 21 5 3"></polygon>
                        </svg>
                        Start Recognition
                    </button>
                    <button id="stop" class="control-button stop-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 6px;">
                            <rect x="6" y="4" width="4" height="16"></rect>
                            <rect x="14" y="4" width="4" height="16"></rect>
                        </svg>
                        Stop Recognition
                    </button>
                    <button id="clear" class="control-button clear-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 6px;">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                        Clear Text
                    </button>
                </div>

                <div id="status" class="status-indicator" style="display: none;">
                    <p>Listening... Speak now</p>
                </div>

                <div class="transcript-container">
                    <h3>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; vertical-align: middle; margin-right: 8px;">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10 9 9 9 8 9"></polyline>
                        </svg>
                        Final Transcript:
                    </h3>
                    <div id="final" class="transcript final-transcript">Your final transcript will appear here...</div>
                    
                    <h3 style="display: none;">Interim Transcript:</h3>
                    <div id="interim" class="transcript interim-transcript" style="display: none;"></div>
                </div>

                <div class="output-actions">
                    <button id="copy" class="control-button copy-button">Copy to Clipboard</button>
                    <button id="download" class="control-button download-button">Download as Text</button>
                    <!-- Generate Mind Map button removed as it's now auto-generated -->
                    <button id="generate-mindmap" class="control-button mindmap-button" style="display: none;">Generate Mind Map</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/speech-to-text.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const darkModeToggle = document.getElementById('darkModeToggle');
            const body = document.body;

            // Check for saved theme preference or default to light mode
            const currentTheme = localStorage.getItem('theme') || 'light';
            body.classList.toggle('dark-mode', currentTheme === 'dark');
            darkModeToggle.textContent = currentTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';

            darkModeToggle.addEventListener('click', function() {
                const isDark = body.classList.toggle('dark-mode');
                const newTheme = isDark ? 'dark' : 'light';
                localStorage.setItem('theme', newTheme);
                darkModeToggle.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
            });
        });
    </script>
    <script src="/speech-to-text.js"></script>
</body>
</html>
